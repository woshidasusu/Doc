# 善用浏览器的一些调试技巧

## $0 和 \_\_vue\_\_

**$0** 是指当鼠标点击 Element 面板的某个 dom 元素后，console 里 $0 变量会自动指向该 dom 元素对象

**\_\_vue\_\_** 是指 vue 框架会往 vue 组件 $mount 挂载的 dom 元素对象上添加一个 `__vue__` 变量来指向当前 vue 组件

![](./images/$0.jpg)

这意味我们可以直接在 console 面板里拿到任意 vue 组件实例对象：

- 可以查看对象内部任意属性
- 也可以直接操作对象内部的属性来达到预期的调试效果
- 甚至可以用来查看三方库的 api，比如 element-ui 的某个组件内部的 api

或许你会疑问，这不是安装 chrome 插件（vue devtools）就可以搞定的事吗，插件还是个可视化界面操作，更直观便捷

没错！插件当然更方便，但没准插件内部实现原理就是这样的呢，掌握这个技巧，也可以在一些插件无法覆盖的场景下来调试页面，比如：

- 生产环境的页面
- 内网部署且无法代理到本地的页面
- 非 chrome 浏览器
- 等等

**举一反三：**

- 很多开源库框架其实都会往绑定的 dom 或者 window 上挂载一些变量上去，善于在 console 利用这些变量，可以方便我们进行很多非本地开发场景下的调试
- 我们日常封装一些复杂业务、复杂组件时，也可以参考这种思路，给自己开一个非本地开发场景下的调试入口，但注意别内存泄漏了
- window 上挂实例对象变量容易导致内存泄漏，所以建议挂一些全局作用域的对象；实例对象尽量挂与他生命周期绑定的 dom 对象

## 接口数据搜索定位

![](./images/network.png)

网络面板支持多个维度的搜索功能：

- 根据内容关键词定位接口
  - 常用于看见界面某个文案或者只知道某个关键词，但想定位它是哪个接口返回时的场景
- 在接口返回的内容里定位关键词
- 根据 url 过滤接口

## 源码定位

jquery 时代的网页源码直接原原本本在浏览器上，调试和阅读都非常方便；

前端工程化后，混淆和压缩已经是标配，当出现生产故障时，首先考虑的应该是本地复现或者是将生成环境页面代理至本地的思路来解决；
但总会有某些场景，由于各种受限，只剩下浏览器直接操作的手段，因此，掌握一些源码定位和调试的方式技巧还是有必要的

### 全局搜索

### 接口调用栈

### console 面板的函数源码跳转

## 源码调试

### 断点

### overrides(覆盖)

## 实操场景说明

以上是个人日常比较常用的一些操作，每个技巧都不是割裂开的，经常是组合交叉使用

比如某生产环境来了个故障，本地无法复现，无法代理，还是个内网，只能远程客户设备直接在浏览器界面上调试定位

首先，我们要定位到大概源码，然后分析、断点、调试

怎么定位源码呢：

- 字符串是不会被混淆的，所以可以全局搜索方式来尝试
- 如果匹配点太多，那也可以先定位到某个关键接口，然后根据接口定位到源码
- 如果还是没有定位到，对象的属性是不会被混淆的，所以也可以通过 `$0 和 __vue__` 来根据某个 vue 组件的方法来定位源码

定位到源码后，断点还分析不出问题时，就可以继续利用 `overrides` 覆盖功能来直接修改浏览器源码进行调试
