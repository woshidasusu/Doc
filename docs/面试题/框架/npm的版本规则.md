# npm

### package.json 里依赖包的版本规则

比如常见的：

```json
{
    "rxjs": "~1.0.1",
    "xxx": "^2.0.1",
    "xxx": "3.0.1"
}
```

版本号其实是有意义的：

**主版本号.次版本号.修订号**

**Major.Minor.Patch**

主版本号：大版本迭代，通常指有不兼容的修改

次版本号：小版本迭代，通常指可兼容的增加功能，也可叫做兼容版本

修订号：紧急爹地，通常指刚改了一些BUG，也可叫做补丁版本

那么，不同的版本修饰符，有着不同的更新行为，如下：

- **^2.2.0** 前缀是 `^` 表示不跨主版本的更新，即安装最新版 2.x.x
- **~2.2.0** 前缀是 `~` 表示不跨主.次版本的更新，即安装最新版 2.2.x
- **>=2.2.0** 前缀是 `>=` 表示版本不小于指定的都可安装当前最新版
- **<=2.2.0** 前缀是 `<=` 表示版本不大于指定的都可安装当前最新版
- **1.2.0 - 2.2.0** 表示在指定版本间的都可安装最新版



### npm 锁定依赖的依赖版本

锁定依赖的版本，就是直接使用具体版本号，不加修饰符

但如果依赖库里面的 package.json 里有使用了最优版本修饰符，如 `^`，`~`，那么，依赖的依赖包还是会安装新版的

如果想锁定依赖的依赖的版本，可以借助 `npm shrinkwrap` 命令

上面是 npm 5 执行的做法

如今的做法是利用 package.json.lock 文件，该文件在执行完 npm install 就会自动生成

package.json-lock 可以理解成保存了 node_module 的状态快照，这样不同机子安装的都会是一样

### npm install 和 update 区别

当本地已安装过依赖包：

- install 不会再次更新包版本，update 会更新包版本
- 